{"version":3,"file":"photographer.js","names":["components","getPhotographers","slug","photographersData","mediaData","globalAssets","defaultData","galleryMedia","async","getData","photographers","media","getSlug","handleData","url","fetch","window","location","search","then","response","URL","slice","err","console","error","item","filter","i","id","name","city","country","tagline","portrait","assets","price","document","querySelector","innerHTML","setAttribute","Portrait","totalLikes","textContent","photo","photosBox","mediasBox","createElement","medias","photographerId","classList","add","galleryPhoto","handleMedia","forEach","video","addVideo","addPhoto","likes","handleSortBtn","updateSorted","appendChild","closeGalleryBtn","addEventListener","style","display","e","key","getElementById","handleGalleryBtn","handleSorting","sortBtn","updateFunc","target","value","sort","a","b","date","updateOptionsState","options","title"],"sources":["pages/photographer.js"],"mappings":"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","sourcesContent":["import * as components from \"../utils/index.js\";\r\nimport { getPhotographers } from \"./index.js\";\r\n\r\nlet slug;\r\nlet photographersData;\r\nlet mediaData;\r\nexport let globalAssets;\r\nexport const defaultData = [];\r\nexport let galleryMedia = [];\r\n\r\nasync function getData() {\r\n  const { photographers, media } = await getPhotographers();\r\n\r\n  photographersData = photographers;\r\n  mediaData = media;\r\n  await getSlug();\r\n  handleData();\r\n}\r\n\r\nasync function getSlug() {\r\n  try {\r\n    const url = await fetch(window.location.search).then(\r\n      (response) => response.url\r\n    );\r\n    slug = new URL(url).search.slice(4);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n}\r\n\r\nexport const handleData = async () => {\r\n  // console;\r\n\r\n  const photographers = photographersData;\r\n  const media = mediaData;\r\n  const item = photographers.filter((i) => i.id == slug);\r\n\r\n  const [{ name, city, country, tagline, portrait, assets, price }] = item;\r\n  globalAssets = assets;\r\n  document.querySelector(\".modal h2\").innerHTML = `Contact me<br />${name}`;\r\n  document\r\n    .querySelector(\".modal\")\r\n    .setAttribute(\"aria-label\", \"Contact me \" + name);\r\n\r\n  const Portrait = `../../assets/photographers/Photographer_Photos/${portrait}`;\r\n\r\n  let totalLikes = 0;\r\n\r\n  document.querySelector(\".name\").textContent = name;\r\n  document.querySelector(\".city\").textContent = `${city}, ${country}`;\r\n  document.querySelector(\".tag\").textContent = tagline;\r\n\r\n  const photo = document.querySelector(\".portrait\");\r\n  photo.setAttribute(\"src\", Portrait);\r\n  photo.setAttribute(\"role\", \"Image\");\r\n  photo.setAttribute(\"alt\", name);\r\n  const photosBox = document.querySelector(\".photos_Container\");\r\n  const mediasBox = document.createElement(\"div\");\r\n\r\n  const medias = media.filter((i) => i.photographerId == slug);\r\n  mediasBox.classList.add(\"photos_container_box\");\r\n\r\n  const galleryPhoto = document.querySelector(\".galleryPhoto\");\r\n\r\n  //Add Data to Default Array Function\r\n  components.handleMedia(medias, defaultData);\r\n  galleryMedia = [...defaultData];\r\n\r\n  galleryMedia.forEach((item) => {\r\n    if (item.video) {\r\n      components.addVideo(item, assets, mediasBox, galleryMedia);\r\n    }\r\n    if (item.photo) {\r\n      components.addPhoto(item, assets, mediasBox, galleryMedia);\r\n    }\r\n    totalLikes += item.likes;\r\n  });\r\n\r\n  // Aria Expand state\r\n  const updateFunc = () =>\r\n    components.updateSorted(mediasBox, galleryMedia, assets, galleryPhoto);\r\n\r\n  components.handleSortBtn(updateFunc);\r\n\r\n  photosBox.appendChild(mediasBox);\r\n\r\n  const closeGalleryBtn = document.querySelector(\".closeBtn\");\r\n  closeGalleryBtn.addEventListener(\r\n    \"click\",\r\n    () => (document.querySelector(\".galleryBox\").style.display = \"none\")\r\n  );\r\n  closeGalleryBtn.addEventListener(\"keypress\", (e) => {\r\n    if (e.key === \"Enter\") {\r\n      return (document.querySelector(\".galleryBox\").style.display = \"none\");\r\n    }\r\n  });\r\n\r\n  // document.getElementById(\"price\").textContent = price;\r\n  document.getElementById(\"price\").textContent = `${price}â‚¬ / jour`;\r\n  document.getElementById(\"totalLikes\").textContent = totalLikes;\r\n  components.handleGalleryBtn();\r\n};\r\n\r\n//Sorting Function\r\nexport const handleSorting = (sortBtn, updateFunc, e) => {\r\n  sortBtn.setAttribute(\"aria-expanded\", \"true\");\r\n\r\n  switch (e.target.value) {\r\n    case \"Date\":\r\n      galleryMedia = galleryMedia.sort((a, b) => b.date - a.date);\r\n      components.updateOptionsState(e.target.options, 1);\r\n      updateFunc();\r\n      break;\r\n\r\n    case \"Title\":\r\n      galleryMedia = galleryMedia.sort((a, b) => {\r\n        if (a.title < b.title) {\r\n          return -1;\r\n        }\r\n        if (b.title < a.title) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      });\r\n      components.updateOptionsState(e.target.options, 2);\r\n      updateFunc();\r\n      break;\r\n\r\n    default:\r\n      galleryMedia = [...defaultData];\r\n      components.updateOptionsState(e.target.options, 0);\r\n      updateFunc();\r\n      break;\r\n  }\r\n};\r\n\r\ngetData();\r\n"]}